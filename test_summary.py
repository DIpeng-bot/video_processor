import logging
from text_processor import TextProcessor
from pathlib import Path

def setup_logging():
    """配置日志"""
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(levelname)s - %(message)s',
        handlers=[
            logging.StreamHandler(),
            logging.FileHandler('test_summary.log', encoding='utf-8')
        ]
    )

def main():
    setup_logging()
    
    # 使用配置文件中的DeepSeek API密钥
    api_key = "sk-58fa21cdc2964973a7e4e2223b65699e"
    
    # 创建文本处理器实例
    processor = TextProcessor(api_key)
    
    # 测试文本
    test_text = """第七章天长第九天地所以能长且久者以及不自生故能长生是以胜人后期身而身先外期身而身存非其无私业故能成其思这样一段从侍面理解上这个还是比较好理解的天长第九现在天长第九就把他描述主要是人的情感比如王菲长的格纳什么天长第九天长第九这个词最早就是从道德经出来了讲的是天地的状态咱们都知道独道德经的时候天地自然这些道其实是一个意思所以天长第九就是道德长九为什么天能够常地能够久就是因为他不自生他不会自己去谋各种各样的利益不自生故能长生所以解决了这个原因然后从这开始推击胜人这又是我们讲的叫什么天地胜人不是对吧反体胜人后面必花重点让你干嘛叫后期身而身先又是我们讲的一个什么这种取反思维对吧你为了身先你需要做的时候你往后转反而你能到前面去外期身而身存不要在乎自己的身怎么样适合出去你反而你的身就得以了保存然后最后感太一句对吧非其无私也故能成其死因为无私所以能成其死所以这个文字上没有什么太大的难点那么我们从内容上来大家一起来看一下第一天长地久天地所以能长且久者一起不自生故能长生这样一段其实的核心就是极与和创造德国有个非常著名的哲学家叫菲尔巴哈菲尔巴哈他说过一句名言叫做价值存在一起对象之中对吧什么意思我是老师我的价值在哪我的价值在学生学生牛逼了我自己不用说我自己的牛逼大家都会说我牛逼对吧我记得当年心动方有一个学校写了一个昭生广告写得特别好而是这么写就当年也广告法也不允许你海报上面写说压重了什么什么样的题目然后呢他们一开始写压中题目结果被投诉了他们转念一想写的叫我们从不说我们自己压重考题这应该是我们的学生走出考场时跟你们说的对吧所以你在这里就能够看出来叫价值存在一起对象当中所以我们在做很多的事的时候不要总是想着锁取这种想法是非常漏的对吧是什么是百姓和楚狗们会去考虑的问题他不是什么人要去考虑的问题锁取锁取我要我要我要不是这样应该是我给我给因为你要这件事情不代表你有价值只有你给人家要才能代表你有价值对吧就是这样一点所以价值存在期对象之中在很多事上如果你总觉得遇到了很多的咖点你转念想一想你有没有极与什么你有没有创造什么这个宇宙不会因为你锁取变得更好这个宇宙会因为你创造变得更好你不断地在极与和创造就代表着你自己怎么样自然就很长久因为你不自生不能长什么对吧这是我觉得理解这句话非常关键的一点那包括比如说上次我们给大家讲的太傻天属里面是不是反覆给大家强调的一件事情是什么爱与服务你看天下为什么我们在说就是到最后的时候叫道术未列天下道术未列就是所有的东西它没有什么样的分裂它是一体的就大家讲得到最后是一件事对吧你比如说抢爱与服务这个词其实是典型的基督教的用法对吧拉分测试典型的基督教的说法但是你看道德经当中也在讲对吧天地所以能长且久者一起不自生不能长生它就是野善与服对吧国家讲什么讲是得对不对如家讲的比如孟子舌深舌身取义舌身取义对吧所以你发现大量的都是在做这个舌的动作大量才做舌的动作所以人锁取是一个非常低能量的表现因为他在锁取这件事情当中本身就暴涵着就暴露了他自己的用缺法所以你每次在做事只要你是有缺法感这个事大概率不可能做成所以一直有人在讲说我要赚钱我要赚钱这辈子这个人不可能赚到钱但相反这个人说我要做事我要做事我要做事这个人一辈子他的收入不太会差讲到这大家就能明白根本不是在讲鸡糖对吧也不是在花笔更不是脾胃而是什么宇宙运行的大道所以大家为什么要去读道德经就是要去把握宇宙最底层的这种运行的原则与此同时我们要取法自然对吧我们要去关道要加入其主是吧所以以后遇到各种各样的事难解之处想一想我给了些什么我创造了些什么这一点非常关键第二我们要了解道德经当中手段和目的的关系道德经牛逼之处在于他跟这个儒家不一样道德经啊他劝你向善他劝你做好事他并不是说你如果不做好事你就是个小人他没有加道德的这个绑架他跟你讲什么他跟你讲规律他告诉你你去服务你去创造你去奉献你的爱你去能够不自生这些所有的事情到最终是一个多营的局面别人也好我也好这是啥这是智慧什么儒家讲的是什么呢宁可我不好我要让大家好这是什么这是道德对吧法家谈的话题是什么你们好不好我不管我要好这是什么这是权力所以你能看到不同的甲台用的事情就是不同的方法对吧所以我们为什么说老子的智慧更加是高密就是在智慧这件事情上老子的智慧更加是高密儒家的智慧孔子的身上实际有很多老子的影子我们在开篇给大家讲道德经的时候说道德经一分为三是吧装子拿走了道德经当中的道甲部分成就了其自由孔子拿走了道德经的部分成其为道德然后寒非拿走了道德经当中的预议人之数所以成其为权力自然而然全部你万法规中谈道德经的这个部分就是一种了解宇宙大道运行的智慧智慧是啥我是说我不好我要让你好而是说我们一定能找到一种方式是你好我也要让你好我也好我让你好是达到我自己好那什么手段所以在这里就有一个非常有意思的问题就在于我能不能让自己好道家的智慧就告诉你当然了但是你要注意手段在哪手段在于你也要让大家好你就能一直一直地好下去你只要不断地让大家好大家就一定会让你好这是宇宙大道的运行规律是从天地当中我们效法得来对吧但是如家不是如家就是如家有一种道德上的虚见和修愉感就是如果我好了别人怎么看我对吧最好的一种状态是我不好让你们好你们总不会再说我些什么了吧但问题在于你真正进入社会之后会发现如果你不好为了让他大家好你自己不好大家也不会放过你或者说大家也根本不会再一对吧然后很多人就从如家转面成法家了我怎么不管你们好不好我先好了再说结果发现第一自己不一定能弄得好第二即便能好了很快也被推翻下去了所以道家智慧应该这么讲是中华文明当中智慧能向全球给他们好好说一说的东西中国的特点是什么你们我一定要让大家好但是我最终的目的肯定是我自己也对好是吧不毁必自己想好的这件事完全自恰不毁必不像如家就讲什么我自己好了不太好说是吧道家没所谓所以你可以看到在这里目的和手段就分得很开目的是什么目的是长生手段是什么是不自生这件事情上要了解道德经经常会提的关于目的和手段的问题这就是真正的智慧的人有知的人回去选有知的人回去选好那同样这段话你自己就后面就能督动了是以胜人后期身上身先外期身上身存非以及无私业不能成其死第一点点形的天地生人死为模式独道德经独道这个天地生人你就知道这叫效法天地我们要效法生人生人模式照着做就行了第二在这里你可以看到有相对的二元关系出现了每次一旦独道德经发现了二元关系道德经想都不要想他的手段一定是什么破二元他一定要告诉你二元到最后的时候是什么是合一的是统一的胜人是一报一为天下使人对吧他一定到最后是合一是统一的要破二元而拥俗之人看待世界他永远是一个二元的关系但是独岸道德经寻求天地之悔的人永远是合一的之悔他要破二元这是第一点但今天我们又看到了另外一个视角关于二元的视角叫用二元只有你能先破二元你才能用二元你如果自己合一不了你就永远是站在一边那一边永远是你的敌对面只有你把这所有的东西看成是一体的而这些勇人看不明白你就可以利用二元解决问题了那这其实就是手段勇目的你想一下任人后期身而身现请问这个世界上能不能所有的人都成圣人如果换的是佛家我家就会讲每个人都能成佛人人心中自由佛心是吧但是你放到道家你仔细一读进去你发现道家的看法这是所有的事情咱们就像自然学在自然界当中它就是个正态分布极蠢的人少数极牛的人少数绝大部分人在中间而不管是极蠢的人还是在中间的这群人他们一定做不到后期身而身现他们一定选择的路是身现但到后面的时候却变成了后期身变成了身后对吧这种选择先身的选择是什么是百姓的选择以后百姓的选择是吧它不是真正高手的选择高手的选择一定是什么后期是这是什么这是手段我要借手段达到的目的是什么是身形道德经是非常强调目的的而且在手段上要跟百姓区别开来你们往这排队我排什么队有什么好排的我另开一道对吧这点非常关键怎么这个流没有了又有了OK没问题对吧就是这所以能明白这些事情之后你就会发现目的和手段完全不一样要采取不一样的方法没问题吧没问题好这一点把它长无处是吧所以破二元是基础用二元是方法真正的高手是先破二元然后再用二元好我们再来看思这个字当然从字面上的我们可以把它理解成字识对吧无识字识非一其无识也固能成其识但是如果我们真的深究这个道德经济的思这个字你会发现里面的门道还是很深的为什么这么讲呢这个思这个字是禁体字它不是中国的古代汉语用的字在中国的传统的三大古文当中加古文金文小钻这个思怎么写呢这个思就这么写就没有和字旁它就表示死OK和字旁后来加的是什么就是说咱是农业文明这地是我的加个和字旁但是其实这个思你如果再去看再早期的一些文现它这个思就是这一思就是一个横折把一点对吧这个就叫做一个脾折加一点这个字就念死就念死而后来才出现了和字旁这样的一个思这个思表示什么意思呢如果你去看古文关制它表示的意思叫字营这现在一看这字营晚上大家就互联网辞了对吧这是我的字营品甚至后来我们现在经常讲这是我的思欲发现没有啥意思我自己就可以完成一个必环的这个叫做死说白了我自识对吧或者用现在流行的话来讲叫内循环这个叫做死我自己依靠自己我不依靠于外务这个叫做死我管好自己的事这个叫做死而不是自死不是我们现在汉语当中这个自私的否定汉而是我管好我自己道德经得有一个非常重要的观点是什么叫小国寡民跟我们现在大国大名的状态不一样小国寡民啥意思不是说这个国家一定要小人说要少不是老子的观点就是他们你每个人管好你自己这个社会一定就好了这个社会之所以乱七八糟就是总是有人想去管别人的事对吧真正每个人能做到自扫门前血就不会有他人瓦上双这就是好的社会现在他们之所以乱七八糟就是总是有些人他不管利用利益的手段权利的手段道德绑架的手段要去干预别人的命运要让别人去衷于他所以你听到这以后你就能明白这个死其实在道德经理他未必是现在的自私的儿子而应该强调的是什么是自赢的意思自己照顾好自己自己管好自己自己对待好自己不给别人贴麻烦这个就叫做死那什么叫做非以及无私业不能成其死了说白了就是你不要去考虑那一些依靠别人的事情自然而你就可以自立了往这个角度上思考你就能知道实际这个死他并不是说我自己的利益不受伤害而是说我自己能把自己照顾得很好这个角度是吧所以有的时候我们经常会讲叫什么还记得吗叫能量回收对吧把去干预别人命运的那些能量收回来即便我们愿意去给但人家也不见得要要我们给了人家要那行我们在属于这个奉献爱与这个帮助是吧创造可以但是你给了半天人家也不要或者是人家要了人家不对你产生任何的反馈他自己没有变好那我们就要学会能量回收为什么因为我们自己首先要完成自我共能能量回收那能量回收来干什么呢非常有意思来看一看这个死我在网上夹一笔它是不是就变成了血呢对吧死这个字其实是什么是这一个我再加一笔这是不是就变成了腰我们讲那个腰肌的腰对吧然后我再往前加一笔很高表示天的这个位置它就成了血所以你会发现死这个字和血这个字本身就是什么就是一体的你怎么能血就是你首先要死我死是为了什么我死的目的是为了去探究整个生命的血的之中那什么叫做血是为我回到第一条对吧血之又血重秒之门我们说了这个秒是木子庞要干吗有内棍打到看这个内心当中的到对吧那你说我自己对吧那么多时间经历去想着别人的命运那么多时间经历一定要干成那些事那些事我浪费的时间经历我是不应该回收回来看什么看自己内心的小宇宙自养自己的灵魂反过来当你能够把自己的内心这些灵魂都给修养好了的话你真正去帮别的时候那就真的就是属于搬手维云 附手维予轻轻易帮人家的命运就发生变化对不对就是这一点所以万事万物管好自己能量回收管好自己所以不要总是去跟别人争不要总是跟别人去抢我们要学会后期身而身先外期身而身存要利用要知道破二元同样的道理我们要学会用二元这是一点那我们小姐一下第七章核心点讲了一下几个第一能量回收是自修的前提万事让你闹心的人闹心的事可以暂时不管对吧把他们从你脑子里清出去实际具就话说的本身你去想想他们在你脑子里吗不再也是你自己应生生把他们拉到你脑子里的你看你现在不就把夏老师拉到你脑子里了吗你不把道德经老子请到你脑子里了吗对不对这就是我们说的叫能量回收是自修的前提第二无私的意思是无所外衣我不依靠外物就叫做无私对吧所以无私的目的是私而私的目的是为了更高违度的合意我要去穿越我认知的权成我要去穿越我社交的权成我要去穿越我人生为了遇到的权成甚至说得再选一点我要穿越宇宙为了的选择我必须省出大量的时间和经历来进行自修和内观对吧他是不现于试的为什么呢因为他没有时间去干这些什么他需要把大量的時間經歷用在自己去跟高微度的生命去進行鏈結的過程另外還記得講說地球上修的最好的競爭是一頭經餘當然這個共參考未必是真但底底確確在別人身上滑廢時間去改造別人的命運這件事情然後通過改造別人的命運讓自己的命運變得更好啊這些事情是不是真的必須得怎麼去做你們可以自己去想一下很多朋友可能問說那蝦老師你出來講這個課你這個目的是啥其實還是逆了一些目的所以為什麼我一直說在直播的時候我要求大家一定要去跟我密切的配合和思考我們能更好的去把這個課上好的原因就在於這個課真的屬於叫做高數目用跟市面上的一些其他人講他們聽不懂不僅聽不懂他也生煩惱性我們也生煩惱性跟各位講大家能認同課間大家能交流上課極限安靜這其實就達到了一個至少在我們這一群人當中我們形成了死吧是這一我就記得當時我學泳春泉我的師叔梁少紅師叔他在珠海開權館他有個特別有意思的點就是成年人如果想拜師跟他學藝拜到他的門下館他叫師傅好茶期是三年才能拜入他的門下本過來如果是小孩很靈的師叔免費酒所以你在這你這能看到不一樣的點還是為了一個所謂的私而負不讓自己的能量好善因為很多成年人到那去去他到底是什麼樣的目的啊到底師叔也不想去費這個禁好茶三年這個人足夠有恆心免免若存用之不清已經基俊遇到了帶過來小孩那本身天然的道小孩甚至不收錢酒去傳播和繼承這樣的一個無學這就是真正的高手的高數其實是沒用的用錢把一些有煩惱性的人直接打來外面進來了就是認真的能夠做到前半我們剛才說的等一下就是你生人後期生而生些外期生而生存非其無私也不能成其死所以大家回去的時候自己仔細的去想一想這個私到底是什麼不是自私自力而是自贏對吧然後你做這種所謂的無私這件事情只是一種什麼手斷而而我不在乎名我不在乎力到最後的時候所謂的名利對我來講只是讓我能夠去做更高級修煉的一種養料也好或者資源也好或者是原材料也好的東西就是正前最後不是為了正前正前是為了更好的修煉的對吧你這麼一離急你就會發現可能正前這件事情對你來講你說不能說不重要但是你不會那麼太質於其結果因為正前已經變成了你做其他事情的手斷手斷所以無私也是手斷私也是手斷中其最後的那個死並不是自私自力的死而是自贏的理解到這一點結果好這是第七章第七章各位也可以再看一看這個原本"""
    
    logging.info("开始测试文本处理...")
    
    try:
        # 处理文本
        result = processor.process_transcript(test_text)
        
        # 输出结果
        print("\n=== 原始文本 ===")
        print(test_text)
        
        print("\n=== 优化后的文本 ===")
        print(result['optimized'])
        
        print("\n=== 结构化总结 ===")
        print(result['summary'])
        
        # 保存结果到文件
        output_dir = Path('output')
        output_dir.mkdir(exist_ok=True)
        
        with open(output_dir / 'test_result.txt', 'w', encoding='utf-8') as f:
            f.write("=== 原始文本 ===\n")
            f.write(test_text)
            f.write("\n\n=== 优化后的文本 ===\n")
            f.write(result['optimized'])
            f.write("\n\n=== 结构化总结 ===\n")
            f.write(result['summary'])
        
        logging.info("文本处理测试完成，结果已保存到 output/test_result.txt")
        
    except Exception as e:
        logging.error(f"测试过程中出错: {str(e)}")

if __name__ == "__main__":
    main() 